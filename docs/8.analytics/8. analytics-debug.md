# Firebase Analytics Debugging Guide

## Not Seeing Events in Firebase Console?

Firebase Analytics events can take **up to 24 hours** to appear in the Firebase Console by default. To see events in **real-time**, you need to enable **DebugView**.

---

## For Web Testing (Recommended for Quick Testing)

### Option 1: Use URL Parameter (Easiest)
1. Add `?debug_mode=true` to your app URL
   ```
   http://localhost:8081?debug_mode=true
   ```
2. Interact with your app (click buttons, navigate, etc.)
3. Open Firebase Console ‚Üí Analytics ‚Üí DebugView
4. You should see events appearing in real-time!

### Option 2: Install Chrome Extension
1. Install: [Google Analytics Debugger](https://chrome.google.com/webstore/detail/google-analytics-debugger/jnkmfdileelhofjcijamephohjechhna)
2. Enable the extension (icon turns green)
3. Refresh your app
4. Check Firebase Console ‚Üí Analytics ‚Üí DebugView

### Option 3: Browser Console Method
1. Open your app in Chrome/Firefox
2. Open DevTools Console (F12)
3. Run this command (replace YOUR_MEASUREMENT_ID with your actual ID):
   ```javascript
   window['ga-disable-YOUR_MEASUREMENT_ID'] = false;
   localStorage.setItem('firebase:debug', 'true');
   ```
4. Refresh the page
5. Check DebugView

---

## For iOS/Android Testing

### iOS (Xcode)
1. In Xcode, go to **Product ‚Üí Scheme ‚Üí Edit Scheme**
2. Select **Run** ‚Üí **Arguments**
3. Add to **Arguments Passed On Launch**:
   ```
   -FIRAnalyticsDebugEnabled
   ```
4. Run the app
5. Check Firebase Console ‚Üí Analytics ‚Üí DebugView

### Android (React Native)
1. Enable debug mode via adb:
   ```bash
   adb shell setprop debug.firebase.analytics.app com.kushalarora92.journeytocitizen
   ```
2. Run your app
3. Check Firebase Console ‚Üí Analytics ‚Üí DebugView

To disable:
```bash
adb shell setprop debug.firebase.analytics.app .none.
```

---

## Verify Events Are Being Sent

### 1. Check Browser Console
Open DevTools Console and look for these logs:
- ‚úÖ `‚úì Firebase Analytics initialized`
- ‚úÖ `üìä Analytics Event: [event_name]`
- ‚úÖ `‚úì Web analytics event logged`

If you see ‚ö†Ô∏è warnings, analytics might not be initialized properly.

### 2. Check Network Tab (Web Only)
1. Open DevTools ‚Üí Network tab
2. Filter by "google-analytics" or "collect"
3. Trigger an event (e.g., click a button)
4. You should see POST requests to `https://www.google-analytics.com/g/collect`

### 3. Verify Firebase Console
1. Go to [Firebase Console](https://console.firebase.google.com/)
2. Select your project: **journey-to-citizen**
3. Navigate to **Analytics ‚Üí DebugView**
4. If debug mode is enabled, events appear within **seconds**
5. If not in debug mode, check **Analytics ‚Üí Events** (up to 24 hours delay)

---

## Common Issues

### ‚ùå "Analytics not initialized"
**Cause**: Analytics failed to initialize (ad blocker, privacy settings, or async timing)

**Solutions**:
- Disable ad blockers (uBlock Origin, Privacy Badger, etc.)
- Try incognito/private browsing mode
- Check browser console for initialization errors
- Verify `.env` has `EXPO_PUBLIC_FIREBASE_MEASUREMENT_ID`

### ‚ùå No events in DebugView
**Cause**: Debug mode not enabled

**Solutions**:
- Add `?debug_mode=true` to URL
- Install Google Analytics Debugger extension
- Check that you're in the right Firebase project

### ‚ùå Events in console but not in Firebase
**Cause**: Ad blocker or network blocking requests

**Solutions**:
- Check Network tab for blocked requests
- Disable ad blockers
- Try different browser
- Check if corporate firewall is blocking Google Analytics

### ‚ùå Native app (iOS/Android) not working
**Cause**: Missing native configuration files

**Solutions**:
- Ensure `google-services.json` (Android) in `android/app/`
- Ensure `GoogleService-Info.plist` (iOS) in `ios/` folder
- Run `npx expo prebuild` to regenerate native files
- Rebuild the app

---

## Quick Test

Run this in your browser console while on your app:
```javascript
// Test if analytics is available
console.log('Analytics available?', window.firebase?.analytics);

// Manually trigger a test event
if (window.firebase?.analytics) {
  window.firebase.analytics().logEvent('test_event', { test: true });
  console.log('‚úÖ Test event sent!');
} else {
  console.error('‚ùå Analytics not available');
}
```

---

## Next Steps

1. **Enable debug mode** using one of the methods above
2. **Trigger some events** by using your app (sign up, login, navigate)
3. **Check DebugView** in Firebase Console
4. If still not working, check browser console for errors

Need more help? Check the [Firebase Analytics Documentation](https://firebase.google.com/docs/analytics/debugview)
