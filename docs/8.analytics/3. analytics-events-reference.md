# Analytics Events Reference

Complete list of all Firebase Analytics events implemented across the Journey to Citizen app.

## Authentication Events
**Location:** `context/AuthContext.tsx`

| Event Name | Parameters | Trigger |
|------------|------------|---------|
| `sign_up` | `method: 'email'` | User successfully creates account |
| `login` | `method: 'email'` | User successfully logs in |
| `user_id` | User's Firebase UID | Set on auth state change |

---

## Navigation Events
**Locations:** `app/(tabs)/_layout.tsx`, `components/WebNavigationBar.tsx`

| Event Name | Parameters | Trigger |
|------------|------------|---------|
| `header_logo_click` | `current_tab: string` | User clicks header logo |
| `logout_button_click` | `current_tab: string` | User clicks logout button |
| `navigation_click` | `from_tab: string`<br>`to_tab: string`<br>`label: string`<br>`is_web: boolean` | User clicks navigation item |

---

## Dashboard Events
**Location:** `app/(tabs)/index.tsx`

### Screen Tracking
- Screen name: `Dashboard`

### Interaction Events

| Event Name | Parameters | Trigger |
|------------|------------|---------|
| `dashboard_action` | `action: 'greeting_section'`<br>`has_display_name: boolean` | User clicks greeting/welcome section |
| `dashboard_action` | `action: 'email_verification_warning'` | User clicks email verification warning |
| `dashboard_action` | `action: 'eligibility_status_card'`<br>`is_eligible: boolean`<br>`days_eligible: number` | User clicks eligibility status card |
| `dashboard_action` | `action: 'progress_card'`<br>`progress_percentage: number`<br>`days_completed: number`<br>`days_remaining: number` | User clicks progress card |
| `dashboard_action` | `action: 'stat_card_click'`<br>`stat_type: 'days_as_pr'`<br>`value: number` | User clicks Days as PR stat card |
| `dashboard_action` | `action: 'stat_card_click'`<br>`stat_type: 'pre_pr_credit'`<br>`value: number` | User clicks Pre-PR Credit stat card |
| `dashboard_action` | `action: 'stat_card_click'`<br>`stat_type: 'absence_days'`<br>`value: number` | User clicks Absence Days stat card |
| `dashboard_action` | `action: 'calculation_card'`<br>`days_as_pr: number`<br>`pre_pr_credit: number`<br>`absence_days: number`<br>`total_eligible: number` | User clicks "How We Calculate" section |
| `dashboard_action` | `action: 'upcoming_trips_alert'`<br>`trip_count: number` | User clicks upcoming trips alert |
| `dashboard_action` | `action: 'complete_profile_button'` | User clicks "Go to Profile" button |
| `dashboard_action` | `action: 'quick_action_update_profile'` | User clicks "Update Profile" quick action |
| `dashboard_action` | `action: 'quick_action_manage_travel'` | User clicks "Manage Travel History" quick action |
| `dashboard_action` | `action: 'disclaimer_click'` | User clicks disclaimer section |

**Note:** Informational sections are clickable to track user interest. High click rates on these sections indicate users want more detailed information, which can guide future features like expandable details, tooltips, or help modals.

---

## Travel Absences Events
**Location:** `app/(tabs)/absences.tsx`

### Screen Tracking
- Screen name: `Travel Absences`

### Interaction Events

| Event Name | Parameters | Trigger |
|------------|------------|---------|
| `absences_action` | `action: 'important_rules_click'` | User clicks Important Rules card |
| `absences_action` | `action: 'filter_click'`<br>`filter_type: 'Past' | 'Current' | 'Upcoming' | 'Total'`<br>`count: number` | User clicks trip filter button |
| `absences_action` | `action: 'tip_section_click'` | User clicks tip section at bottom |

### Add Trip Events

| Event Name | Parameters | Trigger |
|------------|------------|---------|
| `absences_action` | `action: 'add_trip_attempt'`<br>`has_destination: boolean`<br>`from_date: string`<br>`to_date: string` | User attempts to add new trip |
| `absences_action` | `action: 'add_trip_cancelled'`<br>`reason: 'overlap_warning'` | User cancels add due to overlap |
| `absences_action` | `action: 'add_trip_confirmed_despite_overlap'`<br>`overlapping_count: number` | User confirms add despite overlap |
| `absences_action` | `action: 'add_trip_success'`<br>`trip_id: string`<br>`has_destination: boolean` | Trip successfully added |
| `absences_action` | `action: 'add_trip_error'`<br>`error: string` | Error adding trip |

### Edit Trip Events

| Event Name | Parameters | Trigger |
|------------|------------|---------|
| `absences_action` | `action: 'edit_trip_attempt'`<br>`trip_id: string`<br>`updated_fields: string[]` | User attempts to edit trip |
| `absences_action` | `action: 'edit_trip_success'`<br>`trip_id: string` | Trip successfully edited |
| `absences_action` | `action: 'edit_trip_error'`<br>`trip_id: string`<br>`error: string` | Error editing trip |

### Delete Trip Events

| Event Name | Parameters | Trigger |
|------------|------------|---------|
| `absences_action` | `action: 'delete_trip_attempt'`<br>`trip_id: string` | User attempts to delete trip |
| `absences_action` | `action: 'delete_trip_success'`<br>`trip_id: string` | Trip successfully deleted |
| `absences_action` | `action: 'delete_trip_error'`<br>`trip_id: string`<br>`error: string` | Error deleting trip |

---

## Profile Events
**Location:** `app/(tabs)/profile.tsx`

### Screen Tracking
- Screen name: `Profile`

### Name Edit Events

| Event Name | Parameters | Trigger |
|------------|------------|---------|
| `profile_action` | `action: 'edit_name_click'` | User clicks edit name icon |
| `profile_action` | `action: 'edit_name_attempt'`<br>`new_name_length: number` | User attempts to save name |
| `profile_action` | `action: 'edit_name_success'` | Name successfully updated |
| `profile_action` | `action: 'edit_name_error'`<br>`reason: string` or `error: string` | Error updating name |

### Immigration Status Edit Events

| Event Name | Parameters | Trigger |
|------------|------------|---------|
| `profile_action` | `action: 'edit_immigration_status_attempt'`<br>`old_status: string`<br>`new_status: string` | User attempts to change status |
| `profile_action` | `action: 'edit_immigration_status_success'`<br>`new_status: string` | Status successfully updated |
| `profile_action` | `action: 'edit_immigration_status_error'`<br>`error: string` | Error updating status |

### PR Date Edit Events

| Event Name | Parameters | Trigger |
|------------|------------|---------|
| `profile_action` | `action: 'edit_pr_date_click'` | User clicks edit PR date icon |
| `profile_action` | `action: 'edit_pr_date_attempt'`<br>`date: string` | User attempts to save PR date |
| `profile_action` | `action: 'edit_pr_date_success'` | PR date successfully updated |
| `profile_action` | `action: 'edit_pr_date_error'`<br>`reason: string` or `error: string` | Error updating PR date |

### Add Presence Entry Events

| Event Name | Parameters | Trigger |
|------------|------------|---------|
| `profile_action` | `action: 'add_presence_attempt'`<br>`has_purpose: boolean`<br>`from_date: string`<br>`to_date: string` | User attempts to add presence entry |
| `profile_action` | `action: 'add_presence_cancelled'`<br>`reason: 'overlap_warning'` | User cancels add due to overlap |
| `profile_action` | `action: 'add_presence_confirmed_despite_overlap'`<br>`overlapping_count: number` | User confirms add despite overlap |
| `profile_action` | `action: 'add_presence_success'`<br>`entry_id: string`<br>`purpose: string` | Presence entry successfully added |
| `profile_action` | `action: 'add_presence_error'`<br>`error: string` | Error adding presence entry |

### Edit Presence Entry Events

| Event Name | Parameters | Trigger |
|------------|------------|---------|
| `profile_action` | `action: 'edit_presence_attempt'`<br>`entry_id: string`<br>`updated_fields: string[]` | User attempts to edit presence entry |
| `profile_action` | `action: 'edit_presence_success'`<br>`entry_id: string` | Presence entry successfully edited |
| `profile_action` | `action: 'edit_presence_error'`<br>`entry_id: string`<br>`error: string` | Error editing presence entry |

### Delete Presence Entry Events

| Event Name | Parameters | Trigger |
|------------|------------|---------|
| `profile_action` | `action: 'delete_presence_attempt'`<br>`entry_id: string` | User attempts to delete presence entry |
| `profile_action` | `action: 'delete_presence_success'`<br>`entry_id: string` | Presence entry successfully deleted |
| `profile_action` | `action: 'delete_presence_error'`<br>`entry_id: string`<br>`error: string` | Error deleting presence entry |

### Helper Text Events

| Event Name | Parameters | Trigger |
|------------|------------|---------|
| `profile_action` | `action: 'helper_text_click'`<br>`type: 'visitor_stays_info'` | User clicks visitor stays helper text |
| `profile_action` | `action: 'helper_text_click'`<br>`type: 'travel_absences_reminder'` | User clicks travel absences reminder |

---

## Profile Setup Events
**Location:** `app/profile-setup.tsx`

### Screen Tracking
- Screen name: `Profile Setup`

---

## Event Naming Conventions

### Pattern
All custom events follow this structure:
```
{category}_{subcategory}
```

### Categories
- **Authentication:** `sign_up`, `login`
- **Navigation:** `header_logo_click`, `navigation_click`, `logout_button_click`
- **Feature Actions:** `dashboard_action`, `absences_action`, `profile_action`

### Action Parameters
Most events include an `action` parameter that describes the specific interaction:
- Click events: `*_click`
- Attempts: `*_attempt`
- Success: `*_success`
- Errors: `*_error`
- Cancellations: `*_cancelled`

### Additional Context
Events include relevant context parameters:
- **IDs:** `trip_id`, `entry_id`, `user_id`
- **Counts:** `trip_count`, `count`, `overlapping_count`
- **States:** `has_destination`, `has_purpose`, `is_edit`, `is_web`
- **Changes:** `old_status`, `new_status`, `updated_fields`
- **Errors:** `error`, `reason`

---

## Testing Events in Firebase Console

### Debug Mode (Web)
```javascript
// Add to URL
?analytics_debug=true

// Or use Chrome extension:
// Google Analytics Debugger
```

### Debug Mode (iOS)
```bash
# Enable debug mode
-FIRDebugEnabled

# Disable debug mode
-FIRDebugDisabled
```

### Debug Mode (Android)
```bash
# Enable debug mode
adb shell setprop debug.firebase.analytics.app com.kushalarora.journeytocitizen

# Disable debug mode
adb shell setprop debug.firebase.analytics.app .none.
```

### View Events
1. Go to Firebase Console → Analytics → DebugView
2. Select your device/browser
3. Trigger events in the app
4. See real-time event data

---

## Key Metrics to Track

### User Engagement
- Screen views per session
- Time spent on each screen
- Feature usage frequency (trips added, profile updates)

### Conversion Funnels
1. Sign up → Profile Setup → Dashboard view
2. Dashboard → Add travel absence → Success
3. Profile incomplete → Edit profile → Profile complete

### Error Tracking
- Authentication errors
- Profile update failures
- Trip add/edit/delete failures

### Feature Adoption
- % of users adding presence entries
- % of users with travel absences
- Quick action usage rates
- Helper text engagement

---

## Notes
- All events are tracked cross-platform (iOS, Android, Web)
- User properties (user ID) are set on authentication
- Screen tracking is automatic via `useScreenTracking` hook
- Error events include error messages for debugging
- Success events confirm feature completion
