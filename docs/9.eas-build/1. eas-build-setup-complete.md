# EAS Build Setup - Summary & Next Steps

**Date**: October 15, 2025
**Status**: ‚úÖ Configured, Ready to Build

---

## What We Accomplished

### ‚úÖ EAS Configuration Complete
1. **Logged into EAS**: Your Expo account is linked
2. **Created EAS project**: ID `YOUR_EAS_PROJECT_ID` (from EAS init)
3. **Updated app.config.js**:
   - Added EAS project ID
   - Added owner: `your-eas-account-name`
   - Added Firebase config file paths
   - Added `@react-native-firebase/app` plugin
4. **Created eas.json**: Build profiles configured (development, preview, production)

### ‚úÖ Firebase Integration
- `google-services.json` (Android) - at project root
- `GoogleService-Info.plist` (iOS) - at project root
- EAS will automatically handle these files during cloud builds

---

## Next Steps to Build Your App

### Step 1: Generate Android Keystore (Interactive)

Run this command **without** `--non-interactive` flag:

```bash
cd apps/frontend
eas build --platform android --profile preview
```

This will:
- Prompt you to generate a new Android keystore
- Store it securely on Expo's servers
- Use it for all future builds

**Answer the prompts**:
- "Generate a new Android Keystore?" ‚Üí **Yes**
- EAS will handle the rest!

### Step 2: Build for iOS (Optional, to test Xcode bypass)

```bash
eas build --platform ios --profile preview
```

This will:
- Build iOS app in Expo's cloud with latest Xcode
- **Bypasses your local macOS/Xcode version issue!**
- No Mac upgrade needed

### Step 3: Build Both Platforms

```bash
eas build --platform all --profile preview
```

Builds both iOS and Android simultaneously in the cloud.

---

## Build Profiles Explained

Your `eas.json` has 3 profiles:

### 1. **development** (for testing with Expo Go alternative)
```bash
eas build --profile development --platform android
```
- Creates a development build with Expo dev client
- For testing native modules locally
- Internal distribution only

### 2. **preview** (for testing, what we're using now)
```bash
eas build --profile preview --platform android
```
- Generates APK (Android) or IPA (iOS)
- For internal testing before App Store submission
- Easy to install on devices for QA

### 3. **production** (for App Store/Play Store)
```bash
eas build --profile production --platform android
```
- Production-ready build
- AAB for Play Store, IPA for App Store
- Auto-increments version numbers

---

## What Happens During EAS Build

1. **Upload**: Your code + Firebase config files ‚Üí Expo servers
2. **Install**: Dependencies installed in cloud environment
3. **Prebuild**: Native projects generated (like `npx expo prebuild`)
4. **Firebase Setup**: Config files automatically placed in correct locations
5. **Native Build**: 
   - Android: Gradle build with your keystore
   - iOS: Xcode build with latest version
6. **Download**: Final APK/IPA ready to download or install

---

## Testing Analytics After Build

### Android
1. Build and install the APK
2. Enable debug mode:
   ```bash
   adb shell setprop debug.firebase.analytics.app com.journeytocitizen.app
   ```
3. Open the app and trigger events
4. Check Firebase Console ‚Üí Analytics ‚Üí DebugView

### iOS
1. Build and install the IPA (via TestFlight or direct install)
2. Add debug flag in Xcode scheme (if building locally)
3. Or wait 24h to see events in Firebase Analytics dashboard

### Web (Already Working)
```bash
npx expo start
# Press 'w' for web
# Add ?debug_mode=true to URL
# Check Firebase Console ‚Üí Analytics ‚Üí DebugView
```

---

## Cost & Limits

### Free Tier (What you have)
- **30 builds/month** (total across iOS + Android)
- Build time included
- Keystore management included
- Perfect for development and small teams

### If You Need More
- Paid plans available with more builds
- Or use GitHub Actions with EAS (more complex)

---

## Commands Reference

```bash
# Check EAS status
eas whoami
eas project:info

# Build commands
eas build --platform android --profile preview   # Android APK
eas build --platform ios --profile preview       # iOS IPA
eas build --platform all --profile production    # Both platforms, prod

# View build status
eas build:list

# Download latest build
eas build:download --platform android

# Set up app store submission
eas submit --platform android
eas submit --platform ios
```

---

## Troubleshooting

### ‚ùå "File not checked into repository"
This warning is **normal** for Firebase config files. EAS detects them and uploads automatically. Ignore this warning.

### ‚ùå "Keystore not found"
Run the build **without** `--non-interactive` to generate keystore interactively.

### ‚ùå Build fails
- Check build logs in Expo dashboard
- Verify Firebase config files are at project root
- Ensure `app.config.js` has correct paths

---

## Summary

‚úÖ **What's Ready**:
- EAS configured with project ID
- Firebase integration configured
- Build profiles set up
- Ready to build on cloud

üéØ **Next Action**:
```bash
cd apps/frontend
eas build --platform android --profile preview
```

Answer "Yes" to generate keystore, then wait ~10-15 minutes for your first build!

The build will:
- ‚úÖ Handle Firebase config automatically
- ‚úÖ Use latest Android build tools
- ‚úÖ Generate signed APK
- ‚úÖ Be ready to test analytics

üéâ **Result**: Working Android app with Firebase Analytics, built in the cloud, bypassing all local setup issues!

---

**Ready to start your first build?** Run the command above and follow the prompts!
